<% @tables.each do |t| %>
<% if (true) %>
<div class="tableCard" id="table-<%=t.id%>">
	<h5>
	- (<%=t.clients.count%>)
	<%= link_to "Table #{t.number}", tables_home_path(id: t) %> 
	(<%= t.code %>) -
	</h5>
	<br>
	<div id="table<%=t.number%>-content" class="tables-content"> 
	<% t.clients.each do |c| %>
		<%= link_to c.name, table_client_path(t,c) %> 
		($<%= number_with_precision(c.bill_value, :precision => 2) %>)
		<br>
	<% end %>
	<% if t.clients.count != 0 %>
	<br>
	Total: <%= number_with_precision(t.bill_value, :precision => 2) %>
	<br>
	<%= link_to_if(t.requested, "toggle requested", toggle_request_table_path(t,table_id: t, user: 1), method: :post){}%>
	<br>
	<%else%>
		Empty Table
	<%end%>
</div> <!-- TableX-content -->
</div> <!-- Tables --> 
<%end%>
<%end%>




<script type="text/javascript">


// window.setTimeout(updateTables, 500);
setInterval( updateTables , 5000);

function updateTables() {
  $.getJSON('/waiters/tables_calling', function (data)
  {
    $('.tableCard').removeClass('calling');

    for (var i = 0; i < data.length; i++)
    {
    	console.log(data[i]);
    	$('#table-' + data[i]).addClass('calling')
    }
  });
}

</script>